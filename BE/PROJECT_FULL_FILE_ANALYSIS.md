# í”„ë¡œì íŠ¸ ì „ì²´ íŒŒì¼ ì •ë°€ ë¶„ì„ ë³´ê³ ì„œ

## 1. ê°œìš”
`BE` ë””ë ‰í† ë¦¬ ë‚´ì˜ ëª¨ë“  íŒŒì¼ì„ ì „ìˆ˜ ì¡°ì‚¬í•˜ì—¬, í˜„ì¬ êµ¬í˜„ ìƒíƒœë¥¼ ì •í™•í•˜ê²Œ ì§„ë‹¨í–ˆìŠµë‹ˆë‹¤.
ì´ ë³´ê³ ì„œëŠ” ì–´ë–¤ ì½”ë“œê°€ **"ì‹¤ì œë¡œ ë™ì‘ ê°€ëŠ¥í•œ ìƒíƒœ"** ì¸ì§€, ì–´ë–¤ ì½”ë“œê°€ **"ê»ë°ê¸°(Empty/Missing)"** ì¸ì§€ë¥¼ ëª…í™•íˆ êµ¬ë¶„í•©ë‹ˆë‹¤.

---

## 2. ì—ì´ì „íŠ¸(Agent) êµ¬í˜„ ìƒíƒœë³„ ì ê²€

### A. Script Generator (ëŒ€ë³¸ ìƒì„± AI) - [ğŸš¨ ë¯¸ì™„ì„±]
ê°€ì¥ ì‹œê¸‰í•œ ìˆ˜ì •ì´ í•„ìš”í•œ ì˜ì—­ì…ë‹ˆë‹¤. **ì„œë¹„ìŠ¤ëŠ” ì™„ì„±ë˜ì–´ ìˆìœ¼ë‚˜, ì´ë¥¼ ì—°ê²°í•˜ëŠ” ì—ì´ì „íŠ¸ ì½”ë“œê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.**

| ëª¨ë“ˆ | íŒŒì¼ ìœ„ì¹˜ | ìƒíƒœ | ìƒì„¸ ë‚´ìš© |
|:---|:---|:---:|:---|
| **Graph (ë³¸ë¶€)** | `src/script_gen/graph.py` | **âŒ 0 Byte** | ì—ì´ì „íŠ¸ì˜ ì›Œí¬í”Œë¡œìš°ë¥¼ ì •ì˜í•˜ëŠ” ë©”ì¸ íŒŒì¼ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤. **ì‹¤í–‰ ë¶ˆê°€.** |
| **Trend Scout** | `src/script_gen/nodes/trend_scout.py` | **âœ… ì™„ë£Œ** | Reddit íŠ¸ë Œë“œ ìˆ˜ì§‘ ë° í‚¤ì›Œë“œ ì¶”ì¶œ ë¡œì§ ì •ìƒ êµ¬í˜„ë¨. |
| **Planner** | `src/script_gen/nodes/planner.py` | **âœ… ì™„ë£Œ** | 5ë‹¨ ì±•í„° êµ¬ì„± ë° ê²€ì¦ ë¡œì§, News RAG í†µí•© ë“± ê³ ë„í™”ë¨. |
| **News Research** | `src/script_gen/nodes/news_research.py` | **âœ… ì™„ë£Œ** | ì‹¬ì¸µ ë‰´ìŠ¤ ê²€ìƒ‰, ì¤‘ë³µ ì œê±°, ì´ë¯¸ì§€/ì°¨íŠ¸ ìˆ˜ì§‘, íŒ©íŠ¸ ì¶”ì¶œê¹Œì§€ ì™„ë²½í•¨. |
| **YT Fetcher** | `src/script_gen/nodes/yt_fetcher.py` | **âŒ 0 Byte** | `YouTubeService`ë¥¼ í˜¸ì¶œí•´ì•¼ í•˜ëŠ” íŒŒì¼ì´ì§€ë§Œ ë¹„ì–´ìˆìŠµë‹ˆë‹¤. |
| **Competitor Anal** | `src/script_gen/nodes/competitor_anal.py` | **âŒ 0 Byte** | `CompetitorService`ë¥¼ í˜¸ì¶œí•´ì•¼ í•˜ëŠ” íŒŒì¼ì´ì§€ë§Œ ë¹„ì–´ìˆìŠµë‹ˆë‹¤. |
| **Insight Builder** | `src/script_gen/nodes/insight_builder.py` | **âŒ 0 Byte** | ë¶„ì„ ë°ì´í„°ë¥¼ í†µí•©í•´ ì¸ì‚¬ì´íŠ¸ë¥¼ ë„ì¶œí•˜ëŠ” LLM ë¡œì§ì´ ì—†ìŠµë‹ˆë‹¤. |
| **Writer** | `src/script_gen/nodes/writer.py` | **âŒ 0 Byte** | ê°€ì¥ ì¤‘ìš”í•œ **ëŒ€ë³¸ ì‘ì„±(ê¸€ì“°ê¸°)** ë¡œì§ì´ ì—†ìŠµë‹ˆë‹¤. |
| **Verifier** | `src/script_gen/nodes/verifier.py` | **âŒ 0 Byte** | íŒ©íŠ¸ ì²´í¬ ë° ì¶œì²˜ ê²€ì¦ ë¡œì§ì´ ì—†ìŠµë‹ˆë‹¤. |

### B. Thumbnail Generator (ì¸ë„¤ì¼ AI) - [âŒ ë¯¸êµ¬í˜„]
ë¼ˆëŒ€ë§Œ ìˆê³  ë‚´ë¶€ êµ¬í˜„ì´ **ì „ë¬´**í•©ë‹ˆë‹¤. í˜„ì¬ëŠ” DB ìŠ¤í‚¤ë§ˆ(`ThumbnailGeneration`)ë§Œ ì¡´ì¬í•©ë‹ˆë‹¤.

| ëª¨ë“ˆ | íŒŒì¼ ìœ„ì¹˜ | ìƒíƒœ | ìƒì„¸ ë‚´ìš© |
|:---|:---|:---:|:---|
| **Graph** | `src/thumbnail/graph.py` | **âŒ 0 Byte** | ì›Œí¬í”Œë¡œìš° ì •ì˜ ì—†ìŒ. |
| **Nodes** | `src/thumbnail/nodes/*.py` | **âŒ Missing** | `analyzer.py` ë“± íŒŒì¼ ìì²´ê°€ ì—†ê±°ë‚˜ ì½ì„ ìˆ˜ ì—†ìŒ. |

### C. Topic Recommender (ì£¼ì œ ì¶”ì²œ AI) - [âœ… ì™„ì„±]
ìœ ì¼í•˜ê²Œ **ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥í•œ** ì—ì´ì „íŠ¸ì…ë‹ˆë‹¤.

| ëª¨ë“ˆ | íŒŒì¼ ìœ„ì¹˜ | ìƒíƒœ | ìƒì„¸ ë‚´ìš© |
|:---|:---|:---:|:---|
| **Graph** | `src/topic_rec/graph.py` | **âœ… ì™„ë£Œ** | ìˆ˜ì§‘->ì²˜ë¦¬->í´ëŸ¬ìŠ¤í„°ë§->ë¶„ì„->ì¶”ì²œ íë¦„ ì™„ë²½ ì •ì˜ë¨. CLI ì‹¤í–‰ ê°€ëŠ¥. |
| **Recommender** | `src/topic_rec/nodes/recommender.py` | **âœ… ì™„ë£Œ** | Ollama/Gemini ì—°ë™, í˜ë¥´ì†Œë‚˜ í•„í„°ë§ êµ¬í˜„ë¨. |

---

## 3. ë°±ì—”ë“œ ì„œë¹„ìŠ¤(Service Layer) ì§„ë‹¨ - [ğŸ† ìµœìƒ]
API ì„œë²„ë¡œì„œì˜ í•µì‹¬ ê¸°ëŠ¥ì€ ë§¤ìš° ê²¬ê³ í•˜ê²Œ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì—ì´ì „íŠ¸ê°€ ì´ ì„œë¹„ìŠ¤ë“¤ì„ " import" í•´ì„œ ì“°ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤.

| ì„œë¹„ìŠ¤ëª… | íŒŒì¼ ìœ„ì¹˜ | ê¸°ëŠ¥ ìš”ì•½ |
|:---|:---|:---|
| **YouTube** | `app/services/youtube_service.py` | ì¸ê¸° ë¹„ë””ì˜¤ ê²€ìƒ‰(ìì²´ ì•Œê³ ë¦¬ì¦˜), ì±„ë„ í†µê³„ ë™ê¸°í™” |
| **Competitor** | `app/services/competitor_service.py` | ê²½ìŸì‚¬ ì¡°íšŒ, **ëŒ“ê¸€ ìˆ˜ì§‘(ì¢‹ì•„ìš”ìˆœ ì •ë ¬)**, ì±„ë„ ì£¼ì¸ ëŒ“ê¸€ í•„í„°ë§ |
| **Subtitle** | `app/services/subtitle_service.py` | ìë§‰ ì¶”ì¶œ (Innertube + ë¼ì´ë¸ŒëŸ¬ë¦¬ ì´ì¤‘í™”), 429 ì—ëŸ¬ ë°©ì§€ |
| **Auth** | `app/services/auth_service.py` | êµ¬ê¸€ ë¡œê·¸ì¸, ì„¸ì…˜/JWT ê´€ë¦¬, ë¦¬í”„ë ˆì‹œ í† í° |

---

## 4. ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸(DB Schema) ì§„ë‹¨
í•„ìš”í•œ í…Œì´ë¸”ë“¤ì´ ëª¨ë‘ ì •ì˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

- **User / Auth**: `users`, `oauth_accounts`, `sessions`
- **YouTube Data**: `youtube_channels` (ì±„ë„ ì •ë³´), `yt_channel_stats_daily` (í†µê³„)
- **Competitor**: `competitor_collections`, `competitor_videos`, `video_comment_samples`
- **Thumbnail**: `thumbnail_generations`, `thumbnail_strategies`

---

## 5. ìµœì¢… ê²°ë¡  ë° ì‹¤í–‰ ê°€ì´ë“œ

1.  **í˜„ì¬ ìƒí™©**:
    - **ì¬ë£Œ(Service, DB)** ëŠ” í˜¸í…” ë·”í˜ê¸‰ìœ¼ë¡œ ì™„ë²½í•˜ê²Œ ì¤€ë¹„ë¨.
    - **ìš”ë¦¬ì‚¬(Agent)** ì¤‘ **Planner**ë‚˜ **News Research**ëŠ” ì¤€ë¹„ëì§€ë§Œ, **Writer(ì‘ê°€)** ëŠ” ì•„ì§ ì¶œê·¼ ì•ˆ í•¨(0 Byte).
    - **ì§€ë°°ì¸(Graph)** ë„ Script Gen íŒ€ì—ëŠ” ì—†ìŒ.

2.  **í•´ê²° ë°©ë²•**:
    - **ìƒˆë¡œ ì§¤ í•„ìš” ì—†ìŒ**: `yt_fetcher.py`ë‚˜ `competitor_anal.py`ëŠ” ìƒˆë¡œ ì½”ë”©í•˜ëŠ” ê²Œ ì•„ë‹ˆë¼, ì´ë¯¸ ìˆëŠ” `app/services`ì˜ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ì½”ë“œ 5~10ì¤„ë§Œ ë„£ìœ¼ë©´ ë©ë‹ˆë‹¤.
    - **ì§„ì§œ êµ¬í˜„ í•„ìš”**: `writer.py`ì™€ `insight_builder.py`ëŠ” LLM í”„ë¡¬í”„íŠ¸ë¥¼ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.

ê°€ì¥ ë¨¼ì € `src/script_gen/graph.py`ë¥¼ ì‘ì„±í•˜ì—¬ ëŠì–´ì§„ ì—°ê²°ê³ ë¦¬ë¥¼ ì‡ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.
